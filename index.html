<!DOCTYPE html>
<html lang="tr" class="light"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>İSG Sınav Öğrencesi V17</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#0f172a',      // Slate 900
                            card: '#1e293b',    // Slate 800
                            border: '#334155',  // Slate 700
                            text: '#f1f5f9'     // Slate 100
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* POCO X6 PRO VE MOBİL UYUMLU SABİT DÜZEN */
        body { 
            font-family: 'Inter', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            position: fixed; 
            top: 0; left: 0; right: 0; bottom: 0;
            height: 100dvh; 
            overflow: hidden;
            transition: background-color 0.3s ease;
        }
        .scroller { -webkit-overflow-scrolling: touch; }
        .scroller::-webkit-scrollbar { width: 4px; }
        .scroller::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .dark .scroller::-webkit-scrollbar-thumb { background: #475569; } /* Dark scrollbar */
        
        .fade-in { animation: fadeIn 0.15s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(2px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-dark-bg dark:text-dark-text transition-colors duration-300">

    <div id="app" class="flex flex-col h-full w-full max-w-md mx-auto bg-white dark:bg-dark-bg shadow-2xl relative transition-colors duration-300"></div>

    <script>
        // ==========================================
        // 1. SORU HAVUZU (VERİLER)
        // ==========================================
        const questionPool = [
            // --- 2025-1C ---
          
    {
        category: "Mevzuat",
        text: "1. İşyeri Bina ve Eklentilerinde Alınacak Sağlık ve Güvenlik Önlemlerine İlişkin Yönetmelik hükümlerine göre, dinlenme yerleri için yukarıdakilerden hangileri doğrudur? I-İş aralarında uygun dinlenme imkânı bulunan büro ve benzeri iş yerlerinde, ayrıca dinlenme yeri bulunması gerekmez. II-Gerekli şartlar sağlansa bile, yemek yeme yerlerinin dinlenme yeri olarak kullanılması uygun değildir. III-10 ve daha fazla çalışanın bulunduğu iş yerlerinde dinlenme yeri bulunmalıdır.",
        options: ["Yalnız I", "Yalnız II", "I ve II", "I ve III", "II ve III"],
        correct: 3,
        source: "2025-1C",
        explanation: "Yönetmeliğe göre 10 ve daha fazla çalışan varsa dinlenme yeri şarttır. Büro işlerinde iş aralarında dinlenme imkanı varsa ayrıca odaya gerek yoktur. Yemek yerleri şartlar sağlanırsa dinlenme yeri olarak kullanılabilir (II yanlıştır).",
        profile: "igu",
        image: ""
    },
    {
        category: "Genel İSG",
        text: "2. 6331 sayılı Kanun’a göre iş yerinde veya işin yürütümü nedeniyle meydana gelen, ölüme sebebiyet veren veya vücut bütünlüğünü ruhen ya da bedenen engelli hâle getiren olaydır. Yukarıdaki tanım, aşağıdakilerden hangisine aittir?",
        options: ["Acil durum", "İş kazası", "Risk", "Ramak kala olay", "Tehlike"],
        correct: 1,
        source: "2025-1C",
        explanation: "Tanım 6331 sayılı kanunun 3. maddesinde yer alan 'İş Kazası' tanımıdır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "3. Ekranlı Araçlarla Çalışmalarda Sağlık ve Güvenlik Önlemleri Hakkında Yönetmelik’e göre, çalışanların bilgilendirilmesi ve eğitimi; I-Ekranlı araçlarla çalışmalarda riskler ve korunma yolları II-Gözleri en az yoran yazı karakterleri ve renkler III-Ara dinlenmeleri ve egzersizler konularından hangilerini içermektedir?",
        options: ["Yalnız I", "Yalnız III", "I ve II", "II ve III", "I, II ve III"],
        correct: 4,
        source: "2025-1C",
        explanation: "Yönetmeliğe göre eğitimler; riskler, doğru oturuş, gözleri yormayan detaylar, ara dinlenmeleri ve egzersizleri kapsamalıdır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "4. Kişisel Koruyucu Donanımların İşyerlerinde Kullanılması Hakkında Yönetmelik’e göre, aşağıdakilerden hangisi yanlıştır?",
        options: ["Çalışan tarafından ücreti karşılığında alınır.", "Hijyenik şartlarda muhafaza edilir ve kullanıma hazır bulundurulur.", "İşveren, kişisel koruyucu donanımları hangi risklere karşı kullanacağı konusunda çalışanı bilgilendirir.", "Kullanım kılavuzuna uygun olarak bakım, onarım ve periyodik kontrolleri yapılır.", "Kullananın ergonomik gereksinimlerine ve sağlık durumuna uygun olmalıdır."],
        correct: 0,
        source: "2025-1C",
        explanation: "KKD'ler işveren tarafından ücretsiz verilir, çalışan tarafından satın alınmaz.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "5. Kadın Çalışanların Gece Postalarında Çalıştırılma Koşulları Hakkında Yönetmelik’e göre aşağıdakilerden hangisi yanlıştır?",
        options: ["Belediye sınırları dışındaki her türlü iş yeri işverenleri, gece postalarında çalıştıracakları kadın çalışanları iş yerine götürüp getirmekle yükümlüdür.", "İşveren, gece postalarında çalıştırılan kadın çalışanların sağlık muayenelerinin yapılmasını sağlar.", "Kadın çalışanların gece postalarında çalıştırılabilmeleri için 'sakınca olmadığına' dair sağlık raporu alınmalıdır.", "Kadın çalışanın kocası da işin postalar hâlinde yürütüldüğü aynı veya ayrı bir iş yerinde çalışıyor ise, kadın çalışanın görüşü dikkate alınmaksızın, çalışma saatlerini işveren düzenler.", "Turizm, sağlık vb. işlerde kadın çalışanın onayıyla 7.5 saatin üzerinde gece çalışması yaptırılabilir."],
        correct: 3,
        source: "2025-1C",
        explanation: "Eşlerin her ikisinin de postalar halinde çalışması durumunda, postalar eşlerin görüşü alınarak düzenlenir, dikkate alınmaksızın değil.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "6. Asbestle Çalışmalarda Sağlık ve Güvenlik Önlemleri Hakkında Yönetmelik’e göre, aşağıdakilerden hangisi işverenin iş planı ile birlikte bildirimde bulunmak ile yükümlü olduğu bilgilerden biri değildir?",
        options: ["Risk değerlendirme sonuçları", "Yapılacak işler ve işlemler", "Çalışan sayısı", "İşe başlama tarihi ve işin tahmini süresi", "Sökümü yapılacak asbestin türü ve miktarı"],
        correct: 0,
        source: "2025-1C",
        explanation: "Bildirimde işyeri ticari unvanı, söküm çeşidi, süresi, çalışan sayısı vb. istenir ancak 'Risk değerlendirme sonuçları' bildirim listesinde yer almaz (İş planı hazırlanırken kullanılır ama bildirim maddesi değildir).",
        profile: "igu",
        image: ""
    },
    {
        category: "Hukuk",
        text: "7. 4857 sayılı İş Kanunu’na göre, aynı iş yerinde hizmet süresi 5 yıldan fazla 15 yıldan az olan 35 yaşında bir işçinin yıllık izin süresi kaç günden az olamaz?",
        options: ["14", "15", "20", "26", "30"],
        correct: 2,
        source: "2025-1C",
        explanation: "Hizmet süresi 5 yıldan fazla 15 yıldan az olanlar için yıllık izin 20 gündür.",
        profile: "igu",
        image: ""
    },
    {
        category: "Hukuk",
        text: "8. 4857 sayılı İş Kanunu’na göre, tarafların anlaşması ile haftalık normal çalışma süresi, iş yerlerinde haftanın çalışılan günlerine dağıtılabilir. Bunun için, günlük çalışma süresinin kanunen kaç saati aşmaması gerekir?",
        options: ["8", "9", "11", "12", "14"],
        correct: 2,
        source: "2025-1C",
        explanation: "Denkleştirme yapılsa bile günlük çalışma süresi her ne şart altında olursa olsun 11 saati aşamaz.",
        profile: "igu",
        image: ""
    },
    {
        category: "Hukuk",
        text: "9. Ahmet, 25 yaşında bir işçidir. Bir tekstil fabrikasında ilk kez çalışmaya başlamıştır.Ahmet iş yerinde 7 ay süreyle aralıksız çalışmıştır. İş sözleşmesi sona erdikten 3 ay sonra ikinci kez aynı iş yerinde çalışmaya başlayan Ahmet, bu kez 6 ay aralıksız çalışmıştır. Buna göre; I-Ahmet yıllık izne hak kazanmıştır. II-Ahmet’in yıllık izin süresi yirmi günden az olamaz. III-İşveren, ücret ödeyebilir. 4857 sayılı İş Kanunu’na göre Ahmet’in yıllık izin hakkıyla ilgili olarak aşağıdakilerden hangisi doğrudur?",
        options: ["Yalnız I", "Yalnız III", "I ve II", "II ve III", "I, II ve III"],
        correct: 0,
        source: "2025-1C",
        explanation: "Aralıklı çalışmalarda süreler birleştirilir (7+6=13 ay), 1 yılı geçtiği için hak kazanır (I doğru). 5 yıldan az olduğu için izin 14 gündür (II yanlış). İzin hakkı ücrete dönüşemez, kullandırılmalıdır (III yanlış).",
        profile: "igu",
        image: ""
    },
    {
        category: "Hukuk",
        text: "10. 5510 sayılı Sosyal Sigortalar ve Genel Sağlık Sigortası Kanunu kapsamında aşağıdakilerden hangisi iş kazası sayılmaz?",
        options: ["Emzirme odasında kadının kolunu kırması", "İş yerinin avlusunda düşüp bacağını kırması", "Müşterinin evinde tamir yaparken elektriğe kapılması", "Tahsilat için gidilen yerde darp edilmesi", "İşçinin kendi aracıyla iş yerine giderken trafik kazası geçirmesi"],
        correct: 4,
        source: "2025-1C",
        explanation: "İşçinin kendi aracıyla işe gidip gelmesi sırasında olan kazalar, işveren tarafından sağlanan bir taşıt olmadığı sürece iş kazası sayılmaz.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "11. İş Güvenliği Uzmanlarının Görev, Yetki, Sorumluluk ve Eğitimleri Hakkında Yönetmelik’e göre eğitim kurumları, katılımcı kaydı yapabilmek ve eğitime başlayabilmek için aşağıdaki işlemlerden hangisini yapmak zorundadır?",
        options: ["Genel müdürlükçe düzenlenen yetki belgesini almak", "Genel müdürlük ile sözleşme yapmak", "İl müdürlüklerince düzenlenen yetki belgesini almak", "İl müdürlükleri ile sözleşme yapmak", "Valilik ile sözleşme yapmak"],
        correct: 0,
        source: "2025-1C",
        explanation: "Eğitim kurumları Genel Müdürlükçe (İSGGM) düzenlenen yetki belgesini almadan faaliyete başlayamaz.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "12. İş Güvenliği Uzmanlarının... Yönetmelik’e göre, çok tehlikeli sınıfta yer alan 1000 çalışanlı bir iş yerinde tam gün çalışacak en az kaç iş güvenliği uzmanı görevlendirilmelidir?",
        options: ["1", "2", "3", "4", "5"],
        correct: 3,
        source: "2025-1C",
        explanation: "Çok tehlikeli sınıfta 250 çalışana 1 tam gün uzman düşer. 1000 / 250 = 4 uzman gereklidir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Eğitim",
        text: "13. Coşkun, iş güvenliği uzmanı eğitimi alacaktır (180 saat teorik, 40 saat uygulama). Teorik eğitimin en fazla kaç saati uzaktan eğitim ile verilebilir?",
        options: ["80", "90", "100", "110", "120"],
        correct: 1,
        source: "2025-1C",
        explanation: "Yönetmeliğe göre teorik eğitimin en fazla yarısı (%50) uzaktan eğitimle verilebilir. 180 / 2 = 90 saat.",
        profile: "igu",
        image: ""
    },
    {
        category: "Risk Analizi",
        text: "14. Bir çalışanın maruz kaldığı kaza sonucu ortaya çıkan durumlardan hangisinin şiddeti en yüksektir?",
        options: ["Ayakta tedavi gerektiren", "İncinme nedeniyle tedavi gerektiren", "Temel ilk yardım gerektiren", "Üç gün istirahat raporu gerektiren", "Uzuv kaybı nedeniyle tedavi gerektiren"],
        correct: 4,
        source: "2025-1C",
        explanation: "Uzuv kaybı kalıcı sakatlık/iş göremezlik anlamına geldiği için verilen şıklar arasında şiddeti en yüksek olan durumdur.",
        profile: "igu",
        image: ""
    },
    {
        category: "Risk Analizi",
        text: "15. İş Güvenliği Analizi (JSA) ile ilgili olarak aşağıdakilerden hangisi doğrudur?",
        options: ["Çalışanların bireysel performanslarını ölçmek için geliştirilmiştir.", "İş süreçleri adım adım analiz edilerek her aşamada potansiyel tehlikeler belirlenir.", "İş kazaları gerçekleştikten sonra uygulanır.", "Risk değerlendirme sürecinde kullanılmaz.", "Sadece büyük ölçekli işletmelerde kullanılır."],
        correct: 1,
        source: "2025-1C",
        explanation: "Job Safety Analysis (JSA), işi adımlara bölüp her adımdaki tehlikeleri belirleyen proaktif bir yöntemdir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Risk Analizi",
        text: "16. Bir iş yerinde L tipi matris yöntemine göre... olasılık 4 ve şiddet 5. Buna göre, risk skoru kaçtır ve hangi önlem alınmalıdır?",
        options: ["Risk skoru 9’dur, izleme yapılmalıdır.", "Risk skoru 9’dur, tüm faaliyetler durdurulmalıdır.", "Risk skoru 16’dır, periyodik kontroller yapılmalıdır.", "Risk skoru 20’dir, acil önlem alınmalıdır.", "Risk skoru 20’dir, kabul edilebilir seviyededir."],
        correct: 3,
        source: "2025-1C",
        explanation: "L Tipi Matriste Risk Skoru = Olasılık x Şiddet. 4 x 5 = 20. Bu skor 'Yüksek Risk' (veya kabul edilemez risk) grubundadır ve acil önlem gerektirir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Teknik",
        text: "17. İş Ekipmanlarının Kullanımında Sağlık ve Güvenlik Şartları Yönetmeliği’ne göre, standartlarda süre belirtilmemiş ise tezgâhlara uygulanacak periyodik kontrol dönemi azami süresi nedir?",
        options: ["3 ay", "6 ay", "12 ay", "18 ay", "24 ay"],
        correct: 2,
        source: "2025-1C",
        explanation: "Tezgâhlar için standartlarda aksi belirtilmediyse periyodik kontrol süresi 1 yıldır (12 ay).",
        profile: "igu",
        image: ""
    },
    {
        category: "Hukuk",
        text: "18. I. Çıraklar II. Ev hizmetleri III. Hükümlü ve tutuklulara yönelik... IV. Dikimevi faaliyetleri. Hangileri hakkında 6331 sayılı Kanun hükümleri uygulanmaz?",
        options: ["I ve IV", "II ve III", "II ve IV", "III ve IV", "I, II ve III"],
        correct: 1,
        source: "2025-1C",
        explanation: "Ev hizmetleri ve Hükümlü/tutukluların iyileştirme kapsamındaki işleri 6331 kapsamı dışındadır. Çıraklar ve Askeri dikimevleri kapsamdadır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Hukuk",
        text: "19. 6331 sayılı Kanun kapsamında, işveren vekili ve sorumluluğu ile ilgili hangileri doğrudur? I. İşveren vekilinin cezai sorumluluğu işverene aittir. II. İşveren vekilleri işveren sayılır. III. İşveren vekillerinin cezai sorumlulukları gündeme gelebilir.",
        options: ["Yalnız I", "Yalnız II", "Yalnız III", "I ve II", "II ve III"],
        correct: 4,
        source: "2025-1C",
        explanation: "İşveren vekili 6331 uygulanmasında işveren sayılır ve kendi kusurlarından dolayı cezai sorumlulukları vardır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "20. 6331 sayılı İş Sağlığı ve Güvenliği Kanunu’na göre “genç çalışan” aşağıdakilerden hangisi ile tanımlanır?",
        options: ["On beş yaşını bitirmiş ancak on sekiz yaşını doldurmamış çalışan", "On dört yaşını bitirmiş ancak on yedi yaşını doldurmamış çalışan", "On sekiz yaşını bitirmiş ancak yirmi yaşını doldurmamış çalışan", "On altı yaşını bitirmiş ancak on sekiz yaşını doldurmamış çalışan", "On sekiz yaşını bitirmiş ancak yirmi iki yaşını doldurmamış çalışan"],
        correct: 0,
        source: "2025-1C",
        explanation: "Genç çalışan: 15 yaşını tamamlamış ancak 18 yaşını tamamlamamış çalışandır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "21. 6331 sayılı İş Sağlığı ve Güvenliği Kanunu kapsamında aşağıdakilerden hangisi çalışanların yükümlülükleri arasında sayılmamıştır?",
        options: ["Araç, gereç, tehlikeli maddeyi kurallara uygun kullanmak", "Ciddi tehlike ile karşılaştıklarında işverene haber vermek", "İş yerinde alınan iş sağlığı ve güvenliği tedbirlerine uyulup uyulmadığını izlemek, denetlemek", "Kendisinin ve diğer çalışanların güvenliğini tehlikeye düşürmemek", "Müfettiş tespitlerinde işverenle iş birliği yapmak"],
        correct: 2,
        source: "2025-1C",
        explanation: "Tedbirleri 'izlemek ve denetlemek' işverenin veya uzmanların görevidir, çalışanın yükümlülüğü değildir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "22. İş Sağlığı ve Güvenliği Kurulları Hakkında Yönetmelik’in kapsadığı iş yerleri ile ilgili olarak aşağıdakilerden hangisi doğrudur?",
        options: ["Elli ve daha fazla çalışanın bulunduğu ve altı aydan fazla süren sürekli işler", "Yirmi ve daha fazla çalışanın bulunduğu ve altı aydan fazla süren sürekli işler", "Elli ve daha fazla çalışanın bulunduğu ve üç aydan fazla süren sürekli işler", "Otuz ve daha fazla çalışanın bulunduğu ve altı aydan fazla süren sürekli işler", "Otuz ve daha fazla çalışanın bulunduğu ve bir yıldan fazla süren sürekli işler"],
        correct: 0,
        source: "2025-1C",
        explanation: "Kurul kurulması için şart: 50+ çalışan ve 6 aydan uzun süren sürekli işlerdir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Hukuk",
        text: "23. 1982 Anayasası’nın “Toplu iş sözleşmesi, grev hakkı ve lokavt” başlıklı hükümleri kapsamında aşağıdakilerden hangisi yanlıştır?",
        options: ["Uyuşmazlık Yüksek Hakem Kurulunca çözülür.", "Grev ve lokavt toplum zararına kullanılamaz.", "İşçi ve işveren toplu iş sözleşmesi yapma hakkına sahiptir.", "Memurlar ve diğer kamu görevlileri, toplu sözleşme yapma hakkına sahiptir.", "Toplu iş sözleşmesinin yapılması sırasında uyuşmazlık çıkması hâlinde işçiler ve memurlar grev hakkına sahiptir."],
        correct: 4,
        source: "2025-1C",
        explanation: "Memurların grev hakkı yoktur, sadece toplu sözleşme hakkı vardır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Teknik",
        text: "24. Yapı İşlerinde İş Sağlığı ve Güvenliği Yönetmeliği hükümlerine göre, aşağıdakilerden hangisi kazı işlerinde uyulması gereken kurallar bakımından yanlıştır?",
        options: ["Açıkta yapılan 150 cm’den daha derin kazı işlerinde, yan yüzeylerin altını şerit gibi kazarak yukarıdan çökertmek suretiyle kazı yapılmaz.", "Kazının bitişik yapıları etkileme ihtimali mevcut ise kazı başlamadan önce gerekli tedbirler alınır.", "Kazı yan yüzeyi her vardiyadan önce kontrol edilir.", "Meskûn mahallerde, kazı alanının çevresine uyarı şeritleri çekilerek ikaz levhaları asılır.", "Yağış sırasında, kazı işlerinde çalışma yapılmaz."],
        correct: 4,
        source: "2025-1C",
        explanation: "Yağış sırasında gerekli tedbirler (iksa vb.) alınarak çalışılabilir, kesin yasaklama yoktur ancak A, B, C, D kesin hükümlerdir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Fiziksel Riskler",
        text: "25. Çalışanların Titreşimle İlgili Risklerden Korunmalarına Dair Yönetmelik’e göre, çalışanların el-kol titreşimine maruz kalmaları durumunda, sekiz saatlik çalışma süresi için günlük maruziyet sınır değeri kaç m/s²dir?",
        options: ["1,15", "2", "2,5", "4", "5"],
        correct: 4,
        source: "2025-1C",
        explanation: "El-kol titreşimi için Sınır Değer 5 m/s², Eylem Değeri 2.5 m/s²'dir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Eğitim",
        text: "26. Çalışanların İş Sağlığı ve Güvenliği Eğitimlerinin Usul ve Esasları Hakkında Yönetmelik’e göre, çalışanlara verilecek iş sağlığı ve güvenliği eğitimlerinde işverenin sorumluluğuyla ilgili olarak aşağıdakilerden hangisi yanlıştır?",
        options: ["Asıl işveren, alt işverene ait çalışanların eğitimlerinden alt işverenle birlikte sorumludur.", "Geçici iş ilişkisi kurulan işveren, geçici iş ilişkisi ile çalışanlara gerekli eğitimi vermekle yükümlüdür.", "İşveren, çalışanların iş sağlığı ve güvenliği eğitimlerine katılmak zorundadır.", "İşverenler, çalışanlarına, iş sözleşmesinin türüne bakılmaksızın, gerekli eğitimi vermekle yükümlüdür.", "İşveren, eğitim programlarının hazırlanması ve uygulanmasını sağlar."],
        correct: 2,
        source: "2025-1C",
        explanation: "İşverenin eğitim alma zorunluluğu yoktur, eğitim verilmesini sağlama yükümlülüğü vardır.",
        profile: "igu",
        image: ""
    },
    {
        category: "İşaretler",
        text: "27. Sağlık ve Güvenlik İşaretleri Yönetmeliği’ne göre, uyarı işaretlerinin temel nitelikleri ile ilgili olarak aşağıdakilerden hangisi doğrudur?",
        options: ["Beyaz zemin üzerine siyah piktogram", "Kırmızı zemin üzerine beyaz piktogram", "Mavi zemin üzerine beyaz piktogram", "Sarı zemin üzerine siyah piktogram", "Yeşil zemin üzerine beyaz piktogram"],
        correct: 3,
        source: "2025-1C",
        explanation: "Uyarı işaretleri sarı zemin üzerine siyah piktogram ve siyah çerçeve ile ifade edilir.",
        profile: "igu",
        image: ""
    },
    {
        category: "İşaretler",
        text: "28. (Sarı zemin üzerine siyah ünlem işareti görseli) Sağlık ve Güvenlik İşaretleri Yönetmeliği’ne göre bu işaret, hangi işaret levhası kategorisinde yer alır?",
        options: ["Acil çıkış ve ilk yardım", "Emredici", "Uyarı", "Yangınla mücadele", "Yasaklayıcı"],
        correct: 2,
        source: "2025-1C",
        explanation: "Sarı üçgen levhalar 'Uyarı' işaretleridir.",
        profile: "igu",
        image: "img/soru28.jpg"
    },
    {
        category: "İşaretler",
        text: "29. Sağlık ve Güvenlik İşaretleri Yönetmeliği’ne göre; daire biçimindeki yasaklayıcı işaretlerde, beyaz zemin üzerine çerçeve ve diyagonal çizgiden oluşan kırmızı kısımlar, işaret alanının en az yüzde kaçını kapsar?",
        options: ["%25", "%30", "%35", "%45", "%50"],
        correct: 2,
        source: "2025-1C",
        explanation: "Yasaklayıcı işaretlerde kırmızı alan en az %35 olmalıdır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Elektrik",
        text: "30. Elektrik Tesislerinde Topraklamalar Yönetmeliği’ne göre, etkin değeri alçak gerilimde 50 voltun üzerinde olan... gerilim, aşağıdakilerden hangisidir?",
        options: ["Çalışma gerilimi", "Hata gerilimi", "Sınır gerilim", "Tehlikeli gerilim", "Zayıf gerilim"],
        correct: 3,
        source: "2025-1C",
        explanation: "50 Volt üzerindeki alternatif gerilim 'Tehlikeli Gerilim' olarak kabul edilir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Acil Durum",
        text: "31. İşyerlerinde Acil Durumlar Hakkında Yönetmelik’e göre, az tehlikeli sınıfta yer alan ve 90 çalışanı olan bir iş yerinde, uygun donanıma sahip ve özel eğitimli en az kaç söndürme ekibi, destek elemanı olarak görevlendirilir?",
        options: ["1", "2", "3", "4", "5"],
        correct: 1,
        source: "2025-1C",
        explanation: "Az tehlikeli sınıfta her 50 çalışan için 1 destek elemanı gerekir. 90 çalışan için: 1 tam + 1 artan = 2 kişi.",
        profile: "igu",
        image: ""
    },
    {
        category: "Acil Durum",
        text: "32. İşyerlerinde Acil Durumlar Hakkında Yönetmelik’e göre... az tehlikeli iş yerlerinde acil durum planı en geç kaç yılda bir yenilenir?",
        options: ["1", "2", "4", "5", "6"],
        correct: 4,
        source: "2025-1C",
        explanation: "Az tehlikeli sınıfta acil durum planları 6 yılda bir yenilenir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Teknik",
        text: "33. Basit Basınçlı Kaplar Yönetmeliği; kaynaklı, ………. bar’dan daha yüksek iç basınca tabi tutulması amaçlanan... kapları kapsar.",
        options: ["0,5", "1", "1,25", "2", "2,5"],
        correct: 0,
        source: "2025-1C",
        explanation: "Yönetmelik 0,5 bar'dan yüksek basınçlı kapları kapsar.",
        profile: "igu",
        image: ""
    },
    {
        category: "Yangın",
        text: "34. Binaların Yangından Korunması Hakkında Yönetmelik’e göre, acil çıkış kapıları için aşağıdakilerden hangisi yanlıştır?",
        options: ["Çalışanların hemen ve kolayca açabilecekleri şekilde yapılmalıdır.", "Doğrudan, güvenli bir alana yönlendirmelidir.", "Kaçış istikametine doğru açılmalıdır.", "Raylı veya döner kapı olmalıdır.", "Yanmaya dayanıklı malzemeden imal edilmelidir."],
        correct: 3,
        source: "2025-1C",
        explanation: "Acil çıkış kapıları raylı veya döner kapı OLAMAZ.",
        profile: "igu",
        image: ""
    },
    {
        category: "Yangın",
        text: "35. Yangın dumanında bulunan aşağıdaki gazlardan hangisinin toksik etkisi vardır?",
        options: ["Azot", "Karbonmonoksit", "Metan", "Oksijen", "Su buharı"],
        correct: 1,
        source: "2025-1C",
        explanation: "Karbonmonoksit (CO) zehirli (toksik) ve boğucu bir gazdır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Yangın",
        text: "36. Binaların Yangından Korunması Hakkında Yönetmelik'e göre, aşağıdaki “yanıcı madde - yangın sınıfı” eşleştirmelerinden hangisi yanlıştır?",
        options: ["Akaryakıt–B", "Asetilen–C", "Doğal gaz–A", "Magnezyum–D", "Odun–A"],
        correct: 2,
        source: "2025-1C",
        explanation: "Doğal gaz bir gazdır ve C sınıfı yangındır. A sınıfı katı madde yangınlarıdır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Biyolojik Riskler",
        text: "37. Biyolojik Etkenlere Maruziyet... Yönetmelik’e göre hangisi önlemlerden biri değildir?",
        options: ["Acil eylem planı hazırlanmalıdır.", "Hijyen önlemleri alınmalıdır.", "Teknik kontrol önlemleri uygulanmalıdır.", "Çalışanların biyolojik etkenlere karşı doğal bağışıklık kazanması için düzenli olarak maruziyet sağlanmalıdır.", "Kişisel korunma yöntemleri uygulanmalıdır."],
        correct: 3,
        source: "2025-1C",
        explanation: "Çalışanların kasıtlı olarak etkene maruz bırakılması bir önlem değil, suçtur.",
        profile: "igu",
        image: ""
    },
    {
        category: "Fiziksel Riskler",
        text: "38. Çalışanların Gürültü ile İlgili Risklerden Korunmalarına Dair Yönetmelik’e göre gürültünün en düşük maruziyet eylem değeri (LEX, 8saat) aşağıdakilerden hangisidir?",
        options: ["70 dB(A)", "75 dB(A)", "80 dB(A)", "85 dB(A)", "87 dB(A)"],
        correct: 2,
        source: "2025-1C",
        explanation: "En Düşük Eylem Değeri: 80 dB(A). En Yüksek Eylem Değeri: 85 dB(A). Sınır Değer: 87 dB(A).",
        profile: "igu",
        image: ""
    },
    {
        category: "Fiziksel Riskler",
        text: "39. Kapalı bir ortamda, aynı yerde 85 dB(A) ve 85 dB(A) gürültü ile çalışan iki cihazın toplam gürültü değeri kaç dB(A)’dır?",
        options: ["85", "87", "88", "95", "170"],
        correct: 2,
        source: "2025-1C",
        explanation: "Eşit düzeydeki iki ses kaynağı birleştiğinde toplam ses 3 dB artar. 85 + 3 = 88 dB.",
        profile: "igu",
        image: ""
    },
    {
        category: "Kimyasal Riskler",
        text: "40. Aşağıdakilerden hangisi, kimyasal maddelerle çalışmalarda “çalışma süresinin herhangi bir bölümünde aşılmaması gereken maruziyet sınır değeri”nin kısaltmasıdır?",
        options: ["CEILING", "CAS", "EINECS", "STEL", "TWA"],
        correct: 0,
        source: "2025-1C",
        explanation: "CEILING: Tavan değerdir, asla aşılmaması gerekir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "41. İş Sağlığı ve Güvenliği ile İlgili Çalışan Temsilcisinin... Tebliğ’e göre, 1300 çalışanın olduğu bir iş yerinde kaç tane çalışan temsilcisi olmak zorundadır?",
        options: ["3", "4", "5", "6", "7"],
        correct: 2,
        source: "2025-1C",
        explanation: "1001 ile 2000 arası çalışanı olan işyerlerinde 5 temsilci seçilir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Sağlık",
        text: "42. Gürültüye bağlı mesleki işitme kaybıyla ilgili olarak aşağıdakilerden hangisi yanlıştır?",
        options: ["Uzun süre maruz kalınmasıyla meydana gelir.", "Konuşmaları anlamada güçlükler başlar.", "Genellikle 4-5 kHz frekans aralığında başlar.", "Maruziyet sona erdiğinde kendiliğinden düzelir.", "Kalıcı hasara neden olabilir."],
        correct: 3,
        source: "2025-1C",
        explanation: "Gürültüye bağlı işitme kaybı (sensörinöral tip) kalıcıdır, maruziyet bitince düzelmez.",
        profile: "igu",
        image: ""
    },
    {
        category: "Ergonomi",
        text: "43. Elle Taşıma İşleri Yönetmeliği’ne göre, aşağıdaki faaliyetlerden hangisi elle taşıma işi olarak değerlendirilemez?",
        options: ["Yükün itilmesi", "Yükün kaldırılması", "Yükün indirilmesi", "Yükün tartılması", "Yükün çekilmesi"],
        correct: 3,
        source: "2025-1C",
        explanation: "Yükü tartmak fiziksel bir taşıma eylemi (yer değiştirme/güç harcama anlamında) değildir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Ergonomi",
        text: "44. Elle Taşıma İşleri Yönetmeliği’ne göre, aşağıdakilerden hangisi yükün elle taşınmasına ilişkin risk faktörleri arasında yer almaz?",
        options: ["Çalışma ortamının özellikleri", "Fiziksel güç gereksinimi", "İşin gerekleri", "Yükün özellikleri", "Yükün maddi değeri"],
        correct: 4,
        source: "2025-1C",
        explanation: "Yükün pahalı veya ucuz olması ergonomik bir risk faktörü değildir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Kimyasal Riskler",
        text: "45. Kanserojen veya Mutajen Maddelerle... Yönetmelik’e göre, risk değerlendirmesinde hangileri dikkate alınır? I-Maruziyet türü II-Maruziyet süresi III-Maruz kalan çalışanın cinsiyeti IV-Maruziyet düzeyi",
        options: ["Yalnız II", "Yalnız III", "I ve IV", "II ve III", "I, II ve IV"],
        correct: 4,
        source: "2025-1C",
        explanation: "Yönetmelik risk değerlendirmesinde maruziyetin türü, düzeyi ve süresini esas alır. Cinsiyet doğrudan bir kriter değildir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "46. İş Sağlığı ve Güvenliğine İlişkin İşyeri Tehlike Sınıfları Tebliği’ne göre; I-Tehlike sınıfında asıl iş esas alınır. II-Tereddütte kuruluş amacına bakılır. III-Birden fazla asıl iş varsa ağırlıklı faaliyet esas alınır. Hangileri doğrudur?",
        options: ["Yalnız I", "Yalnız II", "I ve II", "I ve III", "II ve III"],
        correct: 2,
        source: "2025-1C",
        explanation: "Birden fazla asıl iş varsa 'ağırlıklı faaliyet' değil, tehlike sınıfı en yüksek olan iş esas alınır. Bu yüzden III yanlıştır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Teknik",
        text: "47. Kaynak işlerinde yanıcı gaz tüplerinin kullanımı ile ilgili olarak aşağıdakilerden hangisi güvenli bir uygulamadır?",
        options: ["Tüpler yatay konumda kullanılmalıdır.", "Asetilen yakıcı gazdır.", "Taşımada basınç arttırılmalıdır.", "Her üç dakikada bir kontrol edilmelidir.", "Tüpler taşınırken vanalar kapalı ve tüplerin koruyucu kapakları takılı olmalıdır."],
        correct: 4,
        source: "2025-1C",
        explanation: "Tüplerin devrilme ve vanalarının kırılma riskine karşı taşınırken kapaklar takılı ve vanalar kapalı olmalıdır.",
        profile: "igu",
        image: ""
    },
    {
        category: "Sağlık",
        text: "48. Gebe veya emziren çalışan için risk varsa işveren ne yapmalıdır? I-Çalışma koşulları/saatleri uyarlanır. II-Mümkün değilse başka işe aktarılır. III-O da mümkün değilse ücretli izinli sayılır.",
        options: ["Yalnız II", "Yalnız III", "I ve II", "I ve III", "I, II ve III"],
        correct: 4,
        source: "2025-1C",
        explanation: "Prosedür sırasıyla: Koşulları düzelt -> İşi değiştir -> Ücretli izin ver şeklindedir.",
        profile: "igu",
        image: ""
    },
    {
        category: "Mevzuat",
        text: "49. İşyeri Hekimi... Yönetmelik’e göre, iş yeri hekiminin çalışma süresi az tehlikeli-tehlikeli-çok tehlikeli sınıfta çalışan başına sırasıyla en az kaç dakikadır?",
        options: ["5, 10, 15", "10, 15, 20", "10, 20, 40", "15, 10, 5", "40, 20, 10"],
        correct: 0,
        source: "2025-1C",
        explanation: "Süreler: Az Tehlikeli 5 dk, Tehlikeli 10 dk, Çok Tehlikeli 15 dk.",
        profile: "igu",
        image: ""
    },
    {
        category: "Maden",
        text: "50. Maden İşyerlerinde İş Sağlığı ve Güvenliği Yönetmeliği’ne göre “ayak”, aşağıdakilerin hangisinde doğru olarak ifade edilmiştir?",
        options: ["Ana kütleden ayrılmış, her an düşebilecek parça", "Maden içerisinde, iki galeri arasında, cephe hâlinde üretim yapılan yer", "Maden içerisinden sürülen galeri", "Taş içerisinde sürülen galeri", "Varagel üzerinde taşımayı sağlayan sistem"],
        correct: 1,
        source: "2025-1C",
        explanation: "Ayak: Madende üretimin yapıldığı (kazının yapıldığı) cepheye verilen isimdir.",
        profile: "igu",
        image: ""
    },
            // --- DENEME ÖRNEKLERİ ---
            { category: "Teknik", text: "(Deneme) Aşağıdakilerden hangisi fiziksel risk etmenidir?", options: ["Gürültü", "Virüs", "Silika", "Benzen", "Ergonomi"], correct: 0, source: "Deneme", explanation: "Gürültü fiziksel risktir.", profile: "igu" },
            { category: "Mevzuat", text: "(Deneme) Kurul kaç ayda bir toplanır?", options: ["1", "2", "3", "6", "12"], correct: 0, source: "Deneme", explanation: "En az ayda 1.", profile: "igu" },
            ...Array.from({length: 48}, (_, i) => ({ category: "Teknik", text: `(Deneme Soru ${i+3}) Örnek deneme sorusu metni buraya gelecek.`, options: ["Seçenek A", "Seçenek B", "Seçenek C", "Seçenek D", "Seçenek E"], correct: 0, source: "Deneme", explanation: "Otomatik açıklama.", profile: "igu" }))
        ];

        // ==========================================
        // 2. UYGULAMA MANTIĞI
        // ==========================================
        const EXAM_CONFIG = {
            'igu': { label: 'İGU (A-B-C)', threshold: 35, distribution: { 'Teknik': 20, 'Mevzuat': 15, 'Genel İSG Konuları': 7, 'Sağlık': 5, 'Hukuk': 3 } },
            'hekim': { label: 'İşyeri Hekimliği', threshold: 35, distribution: { 'Sağlık': 25, 'Mevzuat': 13, 'Genel İSG Konuları': 7, 'Hukuk': 3, 'Teknik': 2 } },
            'dsp': { label: 'Diğer Sağlık P.', threshold: 30, distribution: { 'Sağlık': 17, 'Genel İSG Konuları': 15, 'Mevzuat': 10, 'Teknik': 5, 'Hukuk': 3 } }
        };

        let app = document.getElementById('app');
        let currentQuestions = [];
        let userAnswers = {};
        let currentIndex = 0;
        let timerInterval;
        let timeRemaining = 75 * 60;
        let isTimerActive = true;
        let isEduMode = false;

        // TEMA YÖNETİMİ (Local Storage ile hatırlar)
        function toggleTheme() {
            const html = document.documentElement;
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
            updateThemeIcons();
        }

        function loadTheme() {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            updateThemeIcons();
        }

        function updateThemeIcons() {
            // İkonları güncellemek için yeniden render gerekebilir veya manuel DOM manipülasyonu
            const btn = document.getElementById('themeBtn');
            if(btn) {
                const isDark = document.documentElement.classList.contains('dark');
                btn.innerHTML = isDark ? '<i data-lucide="sun" class="w-5 h-5 text-yellow-400"></i>' : '<i data-lucide="moon" class="w-5 h-5 text-slate-600"></i>';
                lucide.createIcons();
            }
        }

        // Sayfa yüklendiğinde tema kontrolü
        loadTheme();

        function renderStartScreen() {
            setTimeout(() => { lucide.createIcons(); updateThemeIcons(); }, 0);
            const sources = [...new Set(questionPool.map(q => q.source))].sort().reverse();
            let sourceOptions = sources.map(s => {
                let style = s.includes('Deneme') ? 'font-weight:bold; color:#059669;' : '';
                return `<option value="${s}" style="${style}">${s}</option>`;
            }).join('');

            // Dark Mode sınıfları eklendi: dark:bg-dark-card, dark:text-dark-text, vb.
            app.innerHTML = `
                <div class="flex flex-col h-full bg-slate-50 dark:bg-dark-bg transition-colors duration-300">
                    <div class="absolute top-4 right-4 z-50">
                        <button id="themeBtn" onclick="toggleTheme()" class="p-2 rounded-full bg-white dark:bg-dark-card shadow-md border border-slate-100 dark:border-dark-border transition-all hover:scale-110">
                            </button>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 flex flex-col justify-center">
                        <div class="bg-white dark:bg-dark-card rounded-2xl shadow-lg p-6 border border-emerald-100 dark:border-dark-border max-w-sm mx-auto w-full transition-colors duration-300">
                            <div class="text-center mb-6">
                                <div class="inline-flex items-center justify-center w-14 h-14 bg-emerald-100 dark:bg-emerald-900/30 rounded-full mb-3 text-emerald-600 dark:text-emerald-400">
                                    <i data-lucide="book-open-check" class="w-7 h-7"></i>
                                </div>
                                <h1 class="text-xl font-extrabold text-slate-800 dark:text-dark-text">İSG Sınav Öğrencesi V17</h1>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <label class="text-xs font-bold text-slate-400 uppercase">Branş</label>
                                    <select id="profileSelect" class="w-full mt-1 p-3 rounded-lg border dark:border-dark-border bg-white dark:bg-slate-700 font-bold text-slate-700 dark:text-dark-text outline-none focus:ring-2 focus:ring-emerald-400 text-sm">
                                        <option value="igu">İGU (A-B-C)</option>
                                        <option value="hekim">İşyeri Hekimliği</option>
                                        <option value="dsp">Diğer Sağlık P.</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-400 uppercase">Kaynak</label>
                                    <select id="sourceSelect" class="w-full mt-1 p-3 rounded-lg border dark:border-dark-border bg-white dark:bg-slate-700 font-bold text-slate-700 dark:text-dark-text outline-none focus:ring-2 focus:ring-emerald-400 text-sm">
                                        ${sourceOptions}
                                    </select>
                                </div>

                                <div class="pt-2 space-y-2">
                                    <div class="flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-dark-border">
                                        <span class="text-sm font-bold text-slate-700 dark:text-dark-text">Süre (75 Dk)</span>
                                        <input type="checkbox" id="timerToggle" checked class="w-5 h-5 accent-emerald-600 cursor-pointer">
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-dark-border">
                                        <div>
                                            <span class="text-sm font-bold text-slate-700 dark:text-dark-text block">Eğitim Modu</span>
                                            <span class="text-[10px] text-slate-400">Anında cevap göster</span>
                                        </div>
                                        <input type="checkbox" id="eduToggle" class="w-5 h-5 accent-emerald-600 cursor-pointer">
                                    </div>
                                </div>
                            </div>

                            <button onclick="startQuiz()" class="w-full mt-6 bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white py-3.5 rounded-xl font-bold text-base shadow-md transition-all flex items-center justify-center gap-2">
                                Başla <i data-lucide="arrow-right" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function startQuiz() {
            const profile = document.getElementById('profileSelect').value;
            const source = document.getElementById('sourceSelect').value;
            const config = EXAM_CONFIG[profile];
            isTimerActive = document.getElementById('timerToggle').checked;
            isEduMode = document.getElementById('eduToggle').checked;

            currentQuestions = [];
            if (source.includes("Deneme")) {
                let pool = questionPool.filter(q => q.source.includes("Deneme"));
                if(pool.length === 0) pool = questionPool;
                const distribution = config.distribution;
                for (const [cat, count] of Object.entries(distribution)) {
                    let validQs = pool.filter(q => q.category === cat);
                    if (validQs.length > 0) {
                        while(validQs.length < count) { validQs.push(validQs[Math.floor(Math.random() * validQs.length)]); }
                        currentQuestions.push(...validQs.slice(0, count));
                    }
                }
                currentQuestions.sort(() => Math.random() - 0.5);
            } else {
                currentQuestions = questionPool.filter(q => q.source === source);
            }

            if (currentQuestions.length === 0) { alert("Soru bulunamadı!"); return; }

            userAnswers = {};
            currentIndex = 0;
            timeRemaining = 75 * 60;
            if(isTimerActive) startTimer();
            renderQuiz();
        }

        function startTimer() {
            if(timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeRemaining--;
                const el = document.getElementById('timerDisplay');
                if(el) el.innerText = `${Math.floor(timeRemaining / 60).toString().padStart(2,'0')}:${(timeRemaining % 60).toString().padStart(2,'0')}`;
                if (timeRemaining <= 0) finishQuiz();
            }, 1000);
        }

        function renderQuiz() {
            setTimeout(() => { lucide.createIcons(); updateThemeIcons(); }, 0);
            const q = currentQuestions[currentIndex];
            const isAnswered = userAnswers[currentIndex] !== undefined;
            const myAnswer = userAnswers[currentIndex];

            let optionsHtml = q.options.map((opt, i) => {
                const letters = ["A", "B", "C", "D", "E"];
                
                // Dark Mode için class güncellemeleri
                let btnClass = "bg-white dark:bg-slate-700/50 border-slate-200 dark:border-slate-600 hover:bg-emerald-50 dark:hover:bg-slate-600 cursor-pointer text-slate-700 dark:text-dark-text";
                let iconClass = "bg-slate-100 dark:bg-slate-600 text-slate-500 dark:text-slate-300";

                if (isAnswered) {
                    if (i === myAnswer) {
                        btnClass = "bg-emerald-50 dark:bg-emerald-900/20 border-emerald-500 ring-1 ring-emerald-500 text-slate-800 dark:text-white";
                        iconClass = "bg-emerald-600 text-white";
                        if (isEduMode && i !== q.correct) {
                            btnClass = "bg-red-50 dark:bg-red-900/20 border-red-500 ring-1 ring-red-500 text-slate-800 dark:text-white";
                            iconClass = "bg-red-600 text-white";
                        }
                    }
                    if (isEduMode && i === q.correct) {
                        btnClass = "bg-green-50 dark:bg-green-900/20 border-green-500 ring-1 ring-green-500 text-slate-800 dark:text-white";
                        iconClass = "bg-green-600 text-white";
                    }
                }

                let clickAction = (isEduMode && isAnswered) ? '' : `onclick="selectAnswer(${i})"`;
                if (isEduMode && isAnswered) btnClass += " cursor-default";

                return `
                <div ${clickAction} class="w-full p-3 rounded-lg border mb-2 flex items-start gap-3 transition-all ${btnClass}">
                    <div class="flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs border border-black/5 mt-0.5 ${iconClass}">
                        ${letters[i]}
                    </div>
                    <span class="text-sm font-medium leading-snug">${opt}</span>
                </div>`;
            }).join('');

            let imageHtml = q.image ? `<div class="mb-3 flex justify-center"><img src="${q.image}" class="max-h-48 rounded-lg border border-slate-200 dark:border-slate-600 shadow-sm object-contain bg-white"></div>` : '';
            
            let timerHtml = isTimerActive ? `<span class="font-mono font-bold text-emerald-700 dark:text-emerald-400 bg-emerald-100 dark:bg-emerald-900/50 px-2 py-0.5 rounded text-xs" id="timerDisplay">75:00</span>` : '';

            let explanationHtml = '';
            if (isEduMode && isAnswered) {
                explanationHtml = `
                    <div class="mt-3 fade-in">
                        <button onclick="document.getElementById('expText').classList.remove('hidden'); this.style.display='none'" class="text-emerald-600 dark:text-emerald-400 text-xs font-bold flex items-center gap-1 hover:underline mb-2">
                            <i data-lucide="eye" class="w-3 h-3"></i> Açıklamayı Göster
                        </button>
                        <div id="expText" class="hidden p-3 bg-emerald-50 dark:bg-emerald-900/20 border-l-4 border-emerald-500 rounded-r-lg text-emerald-900 dark:text-emerald-200 text-xs leading-relaxed">
                            <span class="font-bold">Açıklama:</span> ${q.explanation || 'Açıklama yok.'}
                        </div>
                    </div>
                `;
            }

            // Quiz ekranı yapısı
            app.innerHTML = `
                <div class="px-4 py-3 border-b border-slate-100 dark:border-dark-border bg-white dark:bg-dark-card flex items-center justify-between shrink-0 z-20 shadow-sm h-12 transition-colors duration-300">
                    <div class="flex items-center gap-2">
                        <button onclick="if(confirm('Çıkmak istiyor musun?')) renderStartScreen()" class="text-slate-400 hover:text-red-500"><i data-lucide="x" class="w-5 h-5"></i></button>
                        <span class="font-bold text-slate-700 dark:text-dark-text text-sm">Soru ${currentIndex + 1} / ${currentQuestions.length}</span>
                    </div>
                    <div class="flex items-center gap-3">
                        ${timerHtml}
                        <button id="themeBtn" onclick="toggleTheme()" class="p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            </button>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto p-4 bg-white dark:bg-dark-card scroller w-full transition-colors duration-300">
                    <div class="max-w-2xl mx-auto">
                        <div class="flex gap-2 mb-3">
                            <span class="text-[10px] font-bold px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-300 rounded uppercase tracking-wider">${q.category}</span>
                        </div>
                        
                        ${imageHtml}
                        <h2 class="text-base md:text-lg font-bold text-slate-800 dark:text-dark-text mb-4 leading-relaxed">${q.text}</h2>
                        
                        <div>${optionsHtml}</div>
                        ${explanationHtml}
                        <div class="h-4"></div>
                    </div>
                </div>

                <div class="px-3 py-3 bg-slate-50 dark:bg-dark-card border-t border-slate-200 dark:border-dark-border shrink-0 z-30 flex gap-2 pb-safe safe-area-bottom transition-colors duration-300">
                    <button onclick="prevQ()" ${currentIndex===0?'disabled':''} class="px-3 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-slate-700 disabled:opacity-40 transition-colors font-bold">
                        <i data-lucide="chevron-left" class="w-5 h-5"></i>
                    </button>
                    
                    <button onclick="clearAnswer()" class="px-3 py-2.5 rounded-lg bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-500 font-bold text-xs flex items-center gap-1 hover:bg-amber-200 dark:hover:bg-amber-900/50 transition-colors whitespace-nowrap">
                        <i data-lucide="eraser" class="w-4 h-4"></i> Boş Bırak
                    </button>

                    <button onclick="${currentIndex === currentQuestions.length-1 ? 'finishQuiz()' : 'nextQ()'}" class="flex-1 px-3 py-2.5 rounded-lg bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white font-bold text-sm shadow flex items-center justify-center gap-2 active:scale-95 transition-transform">
                        ${currentIndex === currentQuestions.length-1 ? 'Bitir' : 'Sonraki'}
                        <i data-lucide="${currentIndex === currentQuestions.length-1 ? 'check-circle' : 'chevron-right'}" class="w-4 h-4"></i>
                    </button>
                </div>
            `;
        }

        function selectAnswer(i) {
            if (isEduMode && userAnswers[currentIndex] !== undefined) return;
            userAnswers[currentIndex] = i;
            renderQuiz();
        }

        function clearAnswer() { 
            delete userAnswers[currentIndex]; 
            renderQuiz(); 
        }
        
        function nextQ() { if(currentIndex < currentQuestions.length-1) { currentIndex++; renderQuiz(); } }
        function prevQ() { if(currentIndex > 0) { currentIndex--; renderQuiz(); } }

        function finishQuiz() {
            clearInterval(timerInterval);
            let correct = 0, wrong = 0, empty = 0;
            currentQuestions.forEach((q, i) => {
                if (userAnswers[i] === undefined) empty++;
                else if (userAnswers[i] === q.correct) correct++;
                else wrong++;
            });

            const score = (correct * (100 / currentQuestions.length)).toFixed(1);
            
            app.innerHTML = `
                <div class="flex-1 flex flex-col items-center justify-center p-6 text-center bg-white dark:bg-dark-card fade-in h-full transition-colors duration-300">
                    <div class="max-w-sm w-full">
                        <div class="w-16 h-16 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-600 dark:text-emerald-400">
                            <i data-lucide="award" class="w-8 h-8"></i>
                        </div>
                        
                        <h2 class="text-xl font-bold text-slate-800 dark:text-dark-text mb-1">Test Bitti!</h2>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mb-6">Puanınız: <span class="text-emerald-600 dark:text-emerald-400 font-bold text-lg">${score}</span></p>

                        <div class="grid grid-cols-3 gap-2 w-full mb-6">
                            <div class="p-2 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800">
                                <div class="text-xl font-black text-green-600 dark:text-green-400">${correct}</div>
                                <div class="text-[10px] font-bold uppercase text-green-800 dark:text-green-300">Doğru</div>
                            </div>
                            <div class="p-2 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800">
                                <div class="text-xl font-black text-red-600 dark:text-red-400">${wrong}</div>
                                <div class="text-[10px] font-bold uppercase text-red-800 dark:text-red-300">Yanlış</div>
                            </div>
                            <div class="p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600">
                                <div class="text-xl font-black text-slate-600 dark:text-slate-300">${empty}</div>
                                <div class="text-[10px] font-bold uppercase text-slate-800 dark:text-slate-400">Boş</div>
                            </div>
                        </div>

                        <button onclick="location.reload()" class="w-full py-3 rounded-xl font-bold bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white shadow-lg flex items-center justify-center gap-2 transition-all">
                            <i data-lucide="rotate-ccw" class="w-4 h-4"></i> Başa Dön
                        </button>
                    </div>
                </div>
            `;
            setTimeout(() => lucide.createIcons(), 0);
        }

        renderStartScreen();
    </script>
</body>
</html>





